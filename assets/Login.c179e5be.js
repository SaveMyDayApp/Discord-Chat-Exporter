import{a as u,c as f,b as _,i as B,h as M,y as C,L as S,M as x,l as v,D as l,d as o,k as d,m as N}from"./vendor.9ed9cc35.js";import{_ as b}from"./lock-twotone.10650ea7.js";import{i as G,_ as q,a as I}from"./validator.5dcb11be.js";import{_ as E,a as R}from"./Button.9419f5df.js";import{g as z,w as D}from"./ChromeShims.7d962531.js";import{s as k}from"./index.6dc802d2.js";import{l as L,e as P}from"./global.7b5e3d25.js";const T={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},U=_("path",{fill:"currentColor",d:"M12 3.19L5 6.3V12h7v8.93c3.72-1.15 6.47-4.82 7-8.94h-7v-8.8z",opacity:".3"},null,-1),F=_("path",{fill:"currentColor",d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12c5.16-1.26 9-6.45 9-12V5l-9-4zm0 19.93V12H5V6.3l7-3.11v8.8h7c-.53 4.12-3.28 7.79-7 8.94z"},null,-1),j=[U,F];function H(p,n){return u(),f("svg",T,j)}var O={name:"ic-twotone-security",render:H};const W={key:1,class:"space-y-3"},Y=_("p",{text:"sm center"},"or",-1),J=N(" New to SaveMyDayApp? "),K={emits:["success","error"],setup(p,{emit:n}){const a=B(!1),e=M({email:"",password:""}),t=C("sendMessage"),r=async()=>{if(e.email){if(!G(e.email)){t({type:"error",message:"Incorrect email address."});return}}else{t({type:"error",message:"Email is required."});return}if(!e.password){t({type:"error",message:"Password is required."});return}try{const c=await L(e);k(c),n("success",c)}catch(c){c.code===10002?t({type:"error",message:"Email or password is incorrect."}):t({type:"error",message:"Network error please check and retry."})}},{useWindowNavigate:s}=S().meta,h=x();async function V(){if(s){let c=z("dashboard/index.html#/register");await D(c)}else await h.push("/register")}return(c,i)=>{const g=q,w=E,y=I,A=b,$=O;return a.value?(u(),f("div",W,[Y,o(y,{modelValue:d(e).email,"onUpdate:modelValue":i[1]||(i[1]=m=>d(e).email=m),type:"email",placeholder:"Enter your email address.",autofocus:"",required:""},{default:l(()=>[o(g,{class:"text-blue-500"})]),_:1},8,["modelValue"]),o(y,{modelValue:d(e).password,"onUpdate:modelValue":i[2]||(i[2]=m=>d(e).password=m),type:"password",placeholder:"Enter your password.",required:""},{default:l(()=>[o(A,{class:"text-orange-500"})]),_:1},8,["modelValue"]),o(w,{type:"success",text:"Sign in with Email",onClick:r},{default:l(()=>[o($)]),_:1}),_("p",{class:"font-bold text-dark-50 text-center"},[J,_("span",{class:"text-current underline underline-current cursor-pointer",onClick:V},"Create an account.")])])):(u(),v(w,{key:0,type:"success",text:"Sign in with Email",onClick:i[0]||(i[0]=m=>a.value=!0)},{default:l(()=>[o(g)]),_:1}))}}},Q={emits:["success","error"],setup(p,{emit:n}){const a=async()=>new Promise((e,t)=>{chrome.identity.getAuthToken({interactive:!0},r=>{console.log("token: "+r),r?P({token:r}).then(s=>{k(s),e(s),n("success",s)}):(n("error",new Error("Google Auth Failed")),t(new Error("Google Auth Failed")))})});return(e,t)=>{const r=R,s=E;return u(),v(s,{type:"primary",text:"Sign in with Google",onclick:a},{default:l(()=>[o(r)]),_:1})}}},X={space:"y-4",md:"w-500px"},ae={setup(p){const n=x();function a(t){n.push("/"),console.log("success",t)}function e(t){console.log("error",t)}return(t,r)=>{const s=Q,h=K;return u(),f("div",X,[o(s,{onSuccess:a,onError:e}),o(h,{onSuccess:a,onError:e})])}}};export{ae as default};
